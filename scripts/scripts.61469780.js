!function(){"function"!=typeof Object.create&&(Object.create=function(){var a=function(){};return function(b){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof b)throw TypeError("Argument must be an object");a.prototype=b;var c={};return a.prototype=null,c}}())}(),function(a,b){"use strict";function c(a,b,c,d,e,f){this.name=a,this.fields=b,this.form_method=c,this.rel=d,this.enctype=e,this.action=f}function d(a,b,c){this.api=a,this.form=b,this.data=c||{};for(var d in b.fields)b.fields[d].default&&(this.data[d]=[b.fields[d].default])}function e(a,b,c,d,e,f,g,h){this.page=a,this.results_per_page=b,this.results_size=c,this.total_results_size=d,this.total_pages=e,this.next_page=f,this.prev_page=g,this.results=h}function f(a,b,c,d,e){this.ref=a,this.label=b,this.isMaster=c,this.scheduledAt=d,this.id=e}function g(){this.cache={},this.states={}}var h=function(b,c,d,e,f,g){var i=new h.fn.init(b,d,e,f,g);return i.get(function(b,d){return c&&b?c(b):(d&&(i.data=d,i.bookmarks=d.bookmarks,i.experiments=new a.Prismic.Experiments(d.experiments)),c?c(null,i):void 0)}),i};h.fn=h.prototype={AT:"at",ANY:"any",SIMILAR:"similar",FULLTEXT:"fulltext",NUMBER:{GT:"number.gt",LT:"number.lt"},DATE:{AFTER:"date.after",BEFORE:"date.before",BETWEEN:"date.between"},DOCUMENT:{ID:"document.id",TYPE:"document.type",TAGS:"document.tags"},constructor:h,data:null,get:function(a){var b=this,c=this.apiCacheKey;this.apiCache.get(c,function(d,e){return d?a(d):e?a(null,e):void b.requestHandler(b.url,function(d,e,f,g){if(d)return a(d,null,f);var h=b.parse(e);g|=b.apiDataTTL,b.apiCache.set(c,h,g,function(b){return b?a(b,null,f):a(null,h,f)})})})},refresh:function(b){var c=this,d=this.apiCacheKey;this.apiCache.remove(d,function(d){if(b&&d)return b(d);if(!b&&d)throw d;c.get(function(d,e){if(b&&d)return b(d);if(!b&&d)throw d;return c.data=e,c.bookmarks=e.bookmarks,c.experiments=new a.Prismic.Experiments(e.experiments),b?b():void 0})})},parse:function(a){var b,d,e,g,h,i,j,k={};for(j in a.forms)a.forms.hasOwnProperty(j)&&(i=a.forms[j],this.accessToken&&(i.fields.access_token={},i.fields.access_token.type="string",i.fields.access_token.default=this.accessToken),e=new c(i.name,i.fields,i.form_method,i.rel,i.enctype,i.action),k[j]=e);if(b=a.refs.map(function(a){return new f(a.ref,a.label,a.isMasterRef,a.scheduledAt,a.id)})||[],d=b.filter(function(a){return a.isMaster===!0}),g=a.types,h=a.tags,0===d.length)throw"No master ref.";return{bookmarks:a.bookmarks||{},refs:b,forms:k,master:d[0],types:g,tags:h,experiments:a.experiments,oauthInitiate:a.oauth_initiate,oauthToken:a.oauth_token}},init:function(b,c,d,e,f){return this.url=b+(c?(b.indexOf("?")>-1?"&":"?")+"access_token="+c:""),this.accessToken=c,this.requestHandler=d||a.Prismic.Utils.request(),this.apiCache=e||new g,this.apiCacheKey=this.url+(this.accessToken?"#"+this.accessToken:""),this.apiDataTTL=f||5,this},forms:function(a){return this.form(a)},form:function(a){var b=this.data.forms[a];return b?new d(this,b,{}):void 0},master:function(){return this.data.master.ref},ref:function(a){for(var b=0;b<this.data.refs.length;b++)if(this.data.refs[b].label==a)return this.data.refs[b].ref},currentExperiment:function(){return this.experiments.current()},parseDoc:function(c){var d={};for(var e in c.data[c.type])d[c.type+"."+e]=c.data[c.type][e];var f=[];if(c.slugs!==b)for(var g=0;g<c.slugs.length;g++)f.push(decodeURIComponent(c.slugs[g]));return new a.Prismic.Document(c.id,c.type,c.href,c.tags,f,d)},previewSession:function(b,c,d,e){var f=this,g=a.Prismic.Predicates;this.requestHandler(b,function(a,h,i){if(a)return console.log("Error from the request"),void e(a,d,i);try{var j=h.mainDocument;j?f.form("everything").query(g.at("document.id",j)).ref(b).submit(function(a,b){0===b.results.length?e(null,d,i):e(null,c(b.results[0]),i)}):e(null,d,i)}catch(a){console.log("Caught e ",a),e(a,d,i)}})}},h.fn.init.prototype=h.fn,c.prototype={},d.prototype={set:function(a,c){var d=this.form.fields[a];if(!d)throw new Error("Unknown field "+a);var e=this.data[a]||[];return(""===c||c===b)&&(c=null),d.multiple?c&&e.push(c):e=c&&[c],this.data[a]=e,this},ref:function(a){return this.set("ref",a)},query:function(a){if("string"==typeof a)return this.set("q",a);var b=[].slice.apply(arguments),c=[];return b.forEach(function(a){var b=0===a[1].indexOf("my.")||0===a[1].indexOf("document.")?a[1]:'"'+a[1]+'"';c.push("[:d = "+a[0]+"("+b+", "+function(){return a.slice(2).map(function(a){return"string"==typeof a?'"'+a+'"':Array.isArray(a)?"["+a.map(function(a){return'"'+a+'"'}).join(",")+"]":a instanceof Date?a.getTime():a}).join(",")}()+")]")}),this.query("["+c.join("")+"]")},pageSize:function(a){return this.set("pageSize",a)},page:function(a){return this.set("page",a)},orderings:function(a){return"string"==typeof a?this.set("orderings",a):a?this.set("orderings","["+a.join(",")+"]"):this},submit:function(a){var b=this.form.action;if(this.data){var c=b.indexOf("?")>-1?"&":"?";for(var d in this.data)if(this.data.hasOwnProperty(d)){var f=this.data[d];if(f)for(var g=0;g<f.length;g++)b+=c+d+"="+encodeURIComponent(f[g]),c="&"}}var i=b+(this.api.accessToken?"#"+this.api.accessToken:""),j=this.api.apiCache,k=this;j.get(i,function(c,d){return c?a(c):d?a(null,d):void k.api.requestHandler(b,function(b,c,d,f){if(b)return void a(b,null,d);var g=c.results.map(h.fn.parseDoc),k=new e(c.page,c.results_per_page,c.results_size,c.total_results_size,c.total_pages,c.next_page,c.prev_page,g||[]);return f?void j.set(i,k,f,function(b){return b?a(b):a(null,k)}):a(null,k)})})}},f.prototype={},g.prototype={get:function(a,b){var c=this.cache[a];return c&&!this.isExpired(a)?b(null,c.data):b()},set:function(a,b,c,d){return this.cache[a]={data:b,expiredIn:c?Date.now()+1e3*c:0},d()},isExpired:function(a){var b=this.cache[a];return!!b&&(0!==b.expiredIn&&b.expiredIn<Date.now())},remove:function(a,b){return delete this.cache[a],b()},clear:function(a,b){return this.cache={},b()}},a.Prismic={experimentCookie:"io.prismic.experiment",previewCookie:"io.prismic.preview",Api:h}}("object"==typeof exports&&exports?exports:"object"==typeof module&&module&&"object"==typeof module.exports?module.exports:window),function(a,b){"use strict";var c=function(){return"undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?function(a,b){var c=new XMLHttpRequest,d=function(){var a,d=/max-age\s*=\s*(\d+)/.exec(c.getResponseHeader("Cache-Control"));d&&d.length>1&&(a=parseInt(d[1],10)),b(null,JSON.parse(c.responseText),c,a)},e=function(){var d=c.status;b(new Error("Unexpected status code ["+d+"] on URL "+a),null,c)};c.onreadystatechange=function(){4===c.readyState&&(c.status&&200==c.status?d():e())},c.open("GET",a,!0),c.setRequestHeader("Accept","application/json"),c.send()}:void 0},d=function(){return"undefined"!=typeof XDomainRequest?function(a,b){var c=new XDomainRequest,d=function(){var a,d=/max-age\s*=\s*(\d+)/.exec(xhr.getResponseHeader("Cache-Control"));d&&d.length>1&&(a=parseInt(d[1],10)),b(null,JSON.parse(c.responseText),c,a)},e=function(a){b(new Error(a),null,c)};c.onload=function(){d(c)},c.onerror=function(){e("Unexpected status code on URL "+a)},c.open("GET",a,!0),c.ontimeout=function(){e("Request timeout")},c.onprogress=function(){},c.send()}:void 0},e=function(){if("function"==typeof require&&require("http")){var a=require("http"),c=require("https"),d=require("url"),e=(require("querystring"),require("../package.json"));return function(f,g){var h=d.parse(f),i="https:"==h.protocol?c:a,j={hostname:h.hostname,path:h.path,query:h.query,headers:{Accept:"application/json","User-Agent":"Prismic-javascript-kit/"+e.version+" NodeJS/"+process.version}};i.get(j,function(a){if(a.statusCode&&200==a.statusCode){var c="";a.setEncoding("utf8"),a.on("data",function(a){c+=a}),a.on("end",function(){var d=JSON.parse(c),e=a.headers["cache-control"];g(null,d,a,e&&/max-age=(\d+)/.test(e)?parseInt(/max-age=(\d+)/.exec(e)[1],10):b)})}else g(new Error("Unexpected status code ["+a.statusCode+"] on URL "+f),null,a)})}}},f=0,g=[],h=function(){if(!(0===g.length||f>=a.Prismic.Utils.MAX_CONNECTIONS)){f++;var b=g.shift();(c()||d()||e()||function(){throw new Error("No request handler available (tried XMLHttpRequest & NodeJS)")}()).call(this,b.url,function(a,c,d,e){f--,b.callback(a,c,d,e),h()})}},i=function(){return function(a,b){g.push({url:a,callback:b}),h()}};a.Prismic.Utils={MAX_CONNECTIONS:20,request:i}}("object"==typeof exports&&exports?exports:"object"==typeof module&&module&&"object"==typeof module.exports?module.exports:window),function(a){"use strict";function b(a,b,c,d){this.id=a,this.slug=b,this.type=c,this.tags=d}function c(){}function d(a,b,c,d,e,f){this.id=a,this.type=b,this.href=c,this.tags=d,this.slug=e?e[0]:"-",this.slugs=e,this.fragments=f}function e(a){this.fragments=a}function f(a){var b={};return a&&"[object Function]"===b.toString.call(a)}c.prototype={get:function(b){var c=this._getFragments(b);return c.length?a.Prismic.Fragments.initField(c[0]):null},getAll:function(b){return this._getFragments(b).map(function(b){return a.Prismic.Fragments.initField(b)},this)},getImage:function(b){var c=this.get(b);return c instanceof a.Prismic.Fragments.Image?c:c instanceof a.Prismic.Fragments.StructuredText?c:null},getAllImages:function(b){return this.getAll(b).map(function(b){if(b instanceof a.Prismic.Fragments.Image)return b;if(b instanceof a.Prismic.Fragments.StructuredText)throw new Error("Not done.");return null})},getImageView:function(b,c){var d=this.get(b);if(d instanceof a.Prismic.Fragments.Image)return d.getView(c);if(d instanceof a.Prismic.Fragments.StructuredText)for(var e=0;e<d.blocks.length;e++)if("image"==d.blocks[e].type)return d.blocks[e];return null},getAllImageViews:function(a,b){return this.getAllImages(a).map(function(a){return a.getView(b)})},getTimestamp:function(b){var c=this.get(b);return c instanceof a.Prismic.Fragments.Timestamp?c.value:void 0},getDate:function(b){var c=this.get(b);return c instanceof a.Prismic.Fragments.Date?c.value:void 0},getBoolean:function(a){var b=this.get(a);return b.value&&("yes"==b.value.toLowerCase()||"on"==b.value.toLowerCase()||"true"==b.value.toLowerCase())},getText:function(b,c){var d=this.get(b);return d instanceof a.Prismic.Fragments.StructuredText?d.blocks.map(function(a){return a.text?a.text+(c?c:""):void 0}).join("\n"):d instanceof a.Prismic.Fragments.Text&&d.value?d.value+(c?c:""):d instanceof a.Prismic.Fragments.Number&&d.value?d.value+(c?c:""):d instanceof a.Prismic.Fragments.Select&&d.value?d.value+(c?c:""):d instanceof a.Prismic.Fragments.Color&&d.value?d.value+(c?c:""):void 0},getStructuredText:function(b){var c=this.get(b);return c instanceof a.Prismic.Fragments.StructuredText?c:null},getLink:function(b){var c=this.get(b);return c instanceof a.Prismic.Fragments.WebLink||c instanceof a.Prismic.Fragments.DocumentLink||c instanceof a.Prismic.Fragments.ImageLink?c:null},getNumber:function(b){var c=this.get(b);return c instanceof a.Prismic.Fragments.Number?c.value:null},getColor:function(b){var c=this.get(b);return c instanceof a.Prismic.Fragments.Color?c.value:null},getGeoPoint:function(b){var c=this.get(b);return c instanceof a.Prismic.Fragments.GeoPoint?c:null},getGroup:function(b){var c=this.get(b);return c instanceof a.Prismic.Fragments.Group?c:null},getHtml:function(a,b){if(!f(b)){var c=b;b=function(a,b){return c.linkResolver(c,a,b)}}var d=this.get(a);return d&&d.asHtml?d.asHtml(b):null},asHtml:function(a){if(!f(a)){var b=a;a=function(a,c){return b.linkResolver(b,a,c)}}var c=[];for(var d in this.fragments){var e=this.get(d);c.push(e&&e.asHtml?'<section data-field="'+d+'">'+e.asHtml(a)+"</section>":"")}return c.join("")},asText:function(a){if(!f(a)){var b=a;a=function(a,c){return b.linkResolver(b,a,c)}}var c=[];for(var d in this.fragments){var e=this.get(d);c.push(e&&e.asText?e.asText(a):"")}return c.join("")},linkedDocuments:function(){var b,c,d,e=[];for(var f in this.fragments){var g=this.get(f);if(g instanceof a.Prismic.Fragments.DocumentLink&&e.push(g.document),g instanceof a.Prismic.Fragments.StructuredText)for(b=0;b<g.blocks.length;b++){var h=g.blocks[b];"image"==h.type&&h.linkTo&&(d=a.Prismic.Fragments.initField(h.linkTo))instanceof DocumentLink&&e.push(d.document);var i=h.spans||[];for(c=0;c<i.length;c++){var j=i[c];"hyperlink"==j.type&&(d=a.Prismic.Fragments.initField(j.data))instanceof a.Prismic.Fragments.DocumentLink&&e.push(d.document)}}if(g instanceof a.Prismic.Fragments.Group)for(b=0;b<g.value.length;b++)e=e.concat(g.value[b].linkedDocuments())}return e},_getFragments:function(a){return this.fragments&&this.fragments[a]?Array.isArray(this.fragments[a])?this.fragments[a]:[this.fragments[a]]:[]}},d.prototype=Object.create(c.prototype),e.prototype=Object.create(c.prototype),a.Prismic.LinkedDocument=b,a.Prismic.Document=d,a.Prismic.GroupDoc=e}("object"==typeof exports&&exports?exports:"object"==typeof module&&module&&"object"==typeof module.exports?module.exports:window),function(a){"use strict";function b(a){this.value=a}function c(b){this.value=b,this.document=new a.Prismic.LinkedDocument(b.document.id,b.document.slug,b.document.type,b.document.tags),this.isBroken=b.isBroken}function d(a){this.value=a}function e(a){this.value=a}function f(a){this.value=a}function g(a){this.value=a}function h(a){this.value=a}function i(a){this.latitude=a.latitude,this.longitude=a.longitude}function j(a){this.value=a}function k(a){this.value=new Date(a)}function l(a){var b=24==a.length?a.substring(0,22)+":"+a.substring(22,24):a;this.value=new Date(b)}function m(a){this.value=a}function n(a,b){this.main=a,this.views=b||{}}function o(a,b,c,d){this.url=a,this.width=b,this.height=c,this.alt=d}function p(b){this.value=[];for(var c=0;c<b.length;c++)this.value.push(new a.Prismic.GroupDoc(b[c]))}function q(a){this.blocks=a}function r(a){return a&&a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>")}function s(a,b,c,d){if(!b||!b.length)return r(a);var e={},f={};b.forEach(function(a){e[a.start]||(e[a.start]=[]),f[a.end]||(f[a.end]=[]),e[a.start].push(a),f[a.end].unshift(a)});for(var g,h="",i=[],j=0,k=a.length+1;k>j;j++)f[j]&&f[j].forEach(function(){var a=i.pop();if(void 0!==a){var b=v(a.span,a.text,d);0===i.length?h+=b:i[i.length-1].text+=b}}),e[j]&&(e[j].sort(function(a,b){return b.end-b.start-(a.end-a.start)}),e[j].forEach(function(a){var b=null;if("hyperlink"==a.type){var d=t(a.data);if(!d)return console&&console.error&&console.error("Impossible to convert span.data as a Fragment",a),"";b=d.url(c),a.url=b}var e={span:a,text:""};i.push(e)})),j<a.length&&(g=a[j],0===i.length?h+=r(g):i[i.length-1].text+=r(g));return h}function t(a){var r={Color:h,Number:j,Date:k,Timestamp:l,Text:b,Embed:m,GeoPoint:i,Select:g,StructuredText:q,"Link.document":c,"Link.web":d,"Link.file":e,"Link.image":f,Group:p};if(r[a.type])return new r[a.type](a.value);if("Image"===a.type){var s=a.value.main,t=new n(new o(s.url,s.dimensions.width,s.dimensions.height,s.alt),{});for(var u in a.value.views)s=a.value.views[u],t.views[u]=new o(s.url,s.dimensions.width,s.dimensions.height,s.alt);return t}console&&console.log&&console.log("Fragment type not supported: ",a.type)}function u(a){var b={};return a&&"[object Function]"===b.toString.call(a)}function v(a,b,c){if(c){var d=c(a,b);if(d)return d}var e={heading1:"h1",heading2:"h2",heading3:"h3",heading4:"h4",heading5:"h5",heading6:"h6",paragraph:"p",preformatted:"pre","list-item":"li","o-list-item":"li","group-list-item":"ul","group-o-list-item":"ol",strong:"strong",em:"em"};if(e[a.type]){var f=e[a.type];return"<"+f+(a.label?' class="'+a.label+'"':"")+">"+b+"</"+f+">"}if("image"==a.type){var g=a.label?" "+a.label:"",h='<img src="'+a.url+'" alt="'+a.alt+'">';return'<p class="block-img'+g+'">'+(a.linkUrl?'<a href="'+a.linkUrl+'">'+h+"</a>":h)+"</p>"}return"embed"==a.type?'<div data-oembed="'+a.embed_url+'" data-oembed-type="'+a.type+'" data-oembed-provider="'+a.provider_name+(a.label?'" class="'+a.label:"")+'">'+a.oembed.html+"</div>":"hyperlink"===a.type?'<a href="'+a.url+'">'+b+"</a>":"label"===a.type?'<span class="'+a.data.label+'">'+b+"</span>":"<!-- Warning: "+a.type+" not implemented. Upgrade the Developer Kit. -->"+b}b.prototype={asHtml:function(){return"<span>"+this.value+"</span>"},asText:function(){return this.value}},c.prototype={asHtml:function(a){return'<a href="'+this.url(a)+'">'+this.url(a)+"</a>"},url:function(a){return a(this.document,this.isBroken)},asText:function(a){return this.url(a)}},d.prototype={asHtml:function(){return'<a href="'+this.url()+'">'+this.url()+"</a>"},url:function(){return this.value.url},asText:function(){return this.url()}},e.prototype={asHtml:function(){return'<a href="'+this.url()+'">'+this.value.file.name+"</a>"},url:function(){return this.value.file.url},asText:function(){return this.url()}},f.prototype={asHtml:function(){return'<a href="'+this.url()+'"><img src="'+this.url()+'" alt="'+this.alt+'"></a>'},url:function(){return this.value.image.url},asText:function(){return this.url()}},g.prototype={asHtml:function(){return"<span>"+this.value+"</span>"},asText:function(){return this.value}},h.prototype={asHtml:function(){return"<span>"+this.value+"</span>"},asText:function(){return this.value}},i.prototype={asHtml:function(){return'<div class="geopoint"><span class="latitude">'+this.latitude+'</span><span class="longitude">'+this.longitude+"</span></div>"},asText:function(){return"("+this.latitude+","+this.longitude+")"}},j.prototype={asHtml:function(){return"<span>"+this.value+"</span>"},asText:function(){return this.value.toString()}},k.prototype={asHtml:function(){return"<time>"+this.value+"</time>"},asText:function(){return this.value.toString()}},l.prototype={asHtml:function(){return"<time>"+this.value+"</time>"},asText:function(){return this.value.toString()}},m.prototype={asHtml:function(){return this.value.oembed.html},asText:function(){return""}},n.prototype={getView:function(a){return"main"===a?this.main:this.views[a]},asHtml:function(){return this.main.asHtml()},asText:function(){return""}},o.prototype={ratio:function(){return this.width/this.height},asHtml:function(){return'<img src="'+this.url+'" width="'+this.width+'" height="'+this.height+'" alt="'+this.alt+'">'},asText:function(){return""}},p.prototype={asHtml:function(a){for(var b="",c=0;c<this.value.length;c++)b+=this.value[c].asHtml(a);return b},toArray:function(){return this.value},asText:function(a){for(var b="",c=0;c<this.value.length;c++)for(var d in this.value[c])b+=this.value[c][d].asText(a);return b}},q.prototype={getTitle:function(){for(var a=0;a<this.blocks.length;a++){var b=this.blocks[a];if(0===b.type.indexOf("heading"))return b}},getFirstParagraph:function(){for(var a=0;a<this.blocks.length;a++){var b=this.blocks[a];if("paragraph"==b.type)return b}},getParagraphs:function(){for(var a=[],b=0;b<this.blocks.length;b++){var c=this.blocks[b];"paragraph"==c.type&&a.push(c)}return a},getParagraph:function(a){return this.getParagraphs()[a]},getFirstImage:function(){for(var a=0;a<this.blocks.length;a++){var b=this.blocks[a];if("image"==b.type)return new o(b.url,b.dimensions.width,b.dimensions.height,b.alt)}},asHtml:function(a,b){var c,d,e=[],f=[];if(!u(a)){var g=a;a=function(a,b){return g.linkResolver(g,a,b)}}if(Array.isArray(this.blocks)){for(var h=0;h<this.blocks.length;h++){if(d=this.blocks[h],"image"==d.type&&d.linkTo){var i=t(d.linkTo);d.linkUrl=i.url(a)}"list-item"!==d.type&&"o-list-item"!==d.type?(e.push(d),c=null):c&&c.type=="group-"+d.type?c.blocks.push(d):(c={type:"group-"+d.type,blocks:[d]},e.push(c))}var j=function(c){var d="";return c.blocks?c.blocks.forEach(function(a){d+=v(a,j(a),b)}):d=s(c.text,c.spans,a,b),d};e.forEach(function(a){f.push(v(a,j(a),b))})}return f.join("")},asText:function(){for(var a=[],b=0;b<this.blocks.length;b++){var c=this.blocks[b];c.text&&a.push(c.text)}return a.join(" ")}},a.Prismic.Fragments={Image:n,ImageView:o,Text:b,Number:j,Date:k,Timestamp:l,Select:g,Color:h,StructuredText:q,WebLink:d,DocumentLink:c,ImageLink:f,FileLink:e,Group:p,GeoPoint:i,initField:t,insertSpans:s}}("object"==typeof exports&&exports?exports:"object"==typeof module&&module&&"object"==typeof module.exports?module.exports:window),function(a){"use strict";var b={at:function(a,b){return["at",a,b]},any:function(a,b){return["any",a,b]},fulltext:function(a,b){return["fulltext",a,b]},similar:function(a,b){return["similar",a,b]},gt:function(a,b){return["number.gt",a,b]},lt:function(a,b){return["number.lt",a,b]},inRange:function(a,b,c){return["number.inRange",a,b,c]},dateBefore:function(a,b){return["date.before",a,b]},dateAfter:function(a,b){return["date.after",a,b]},dateBetween:function(a,b,c){return["date.between",a,b,c]},dayOfMonth:function(a,b){return["date.day-of-month",a,b]},dayOfMonthAfter:function(a,b){return["date.day-of-month-after",a,b]},dayOfMonthBefore:function(a,b){return["date.day-of-month-before",a,b]},dayOfWeek:function(a,b){return["date.day-of-week",a,b]},dayOfWeekAfter:function(a,b){return["date.day-of-week-after",a,b]},dayOfWeekBefore:function(a,b){return["date.day-of-week-before",a,b]},month:function(a,b){return["date.month",a,b]},monthBefore:function(a,b){return["date.month-before",a,b]},monthAfter:function(a,b){return["date.month-after",a,b]},year:function(a,b){return["date.year",a,b]},hour:function(a,b){return["date.hour",a,b]},hourBefore:function(a,b){return["date.hour-before",a,b]},hourAfter:function(a,b){return["date.hour-after",a,b]},near:function(a,b,c,d){return["geopoint.near",a,b,c,d]}};a.Prismic.Predicates=b}("object"==typeof exports&&exports?exports:"object"==typeof module&&module&&"object"==typeof module.exports?module.exports:window),function(a){"use strict";function b(a){var b=[],d=[];a&&(a.drafts&&a.drafts.forEach(function(a){b.push(new c(a))}),a.running&&a.running.forEach(function(a){d.push(new c(a))})),this.drafts=b,this.running=d}function c(a){this.data=a;var b=[];a.variations&&a.variations.forEach(function(a){b.push(new d(a))}),this.variations=b}function d(a){this.data=a}b.prototype.current=function(){return this.running.length>0?this.running[0]:null},b.prototype.refFromCookie=function(a){if(!a||""===a.trim())return null;var b=a.trim().split(" ");if(b.length<2)return null;var c=b[0],d=parseInt(b[1],10),e=this.running.filter(function(a){return a.googleId()==c&&a.variations.length>d})[0];return e?e.variations[d].ref():null},c.prototype.id=function(){return this.data.id},c.prototype.googleId=function(){return this.data.googleId},c.prototype.name=function(){return this.data.name},d.prototype.id=function(){return this.data.id},d.prototype.ref=function(){return this.data.ref},d.prototype.label=function(){return this.data.label},a.Prismic.Experiments=b,a.Prismic.Experiment=c,a.Prismic.Variation=d}("object"==typeof exports&&exports?exports:"object"==typeof module&&module&&"object"==typeof module.exports?module.exports:window),function(a){a.Prismic.version="1.0.28"}("object"==typeof exports&&exports?exports:"object"==typeof module&&module&&"object"==typeof module.exports?module.exports:window),angular.module("mediosSuciosFrontApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngMaterial","restangular","ngMessages","chart.js","prismic.io"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"vm"}).when("/content/:contentSlug",{templateUrl:"views/content.html",controller:"ContentCtrl",controllerAs:"vm"}).when("/contacto",{templateUrl:"views/contacto.html",controller:"ContactoCtrl",controllerAs:"vm"}).when("/aviso-de-privacidad",{templateUrl:"views/aviso-de-privacidad.html",controller:"AvisoDePrivacidadCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),moment.locale("es")}]).config(["RestangularProvider",function(a){a.setBaseUrl("https://medios-sucios-api.herokuapp.com/")}]).config(["$mdThemingProvider",function(a){var b=a.extendPalette("indigo",{500:"#2D303A"});a.definePalette("pinkMS",b),a.theme("default").primaryPalette("pinkMS")}]).config(["ChartJsProvider",function(a){a.setOptions({colors:["#f0b4bd","#fff","#DCDCDC","#46BFBD","#FDB45C","#949FB1","#4D5360"]})}]).config(["PrismicProvider",function(a){a.setApiEndpoint("https://medios-sucios.prismic.io/api"),a.setLinkResolver(function(a,b){return"#!/content/"+b.id+"&slug="+b.slug+a.maybeRefParam})}]),angular.module("mediosSuciosFrontApp").controller("MainCtrl",["msApiService","metadataService","$mdSidenav","$filter","Prismic",function(a,b,c,d,e){function f(){return l.loadingReports=!0,a.getReports().then(l.setReports)}function g(){l.getReports(),l.setupCharts(),l.motives=[{title:"Étnia"},{title:"Nacionalidad"},{title:"Clase"},{title:"Género"},{title:"Religión"},{title:"Orientación Sexual"},{title:"Discapacidad"}],e.all().then(function(a){l.pages=a.results,l.generalContent=l.pages.find(function(a){return"contenido_general"===a.type}),l.pages=l.pages.filter(function(a){return"pagina"===a.type})})}function h(a){return l.loadingReports=!1,l.reports=a.map(function(a){return a.info=b.getBasicInfo(a.metadata),a}),l.reports}function i(){l.reporting=!0,a.submitReport(l.report).then(function(a){l.reporting=!1,l.metadata=a,l.toggleSidenav(),l.getReports()})}function j(){c("left").toggle()}function k(){a.getSourceCount().then(function(a){var b=a.data;l.sourceData=b.reduce(function(a,b){return{labels:a.labels?a.labels.concat(b._id):[b._id],data:a.data?a.data.concat(b.total):[b.total]}},{}),l.sourceData.options={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}).catch(function(a){console.log(a)}),a.getMotiveCount().then(function(a){var b=a.data;l.motiveData=b.reduce(function(a,b){return{labels:a.labels?a.labels.concat(b._id):[b._id],data:a.data?a.data.concat(b.total):[b.total]}},{}),l.motiveData.options={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}).catch(function(a){console.log(a)}),a.getDateReportCount().then(function(a){var b=a.data;l.dateData=b.reduce(function(a,b){var c=moment(b._id,"MM").toDate(),e=d("date")(c,"MMMM");return{labels:a.labels?a.labels.concat(e):[e],data:a.data?a.data.concat(b.total):[b.total]}},{})}).catch(function(a){console.log(a)}),l.datesData.labels=["January","February","March","April","May","June","July"],l.datesData.series=["Series A"],l.datesData.data=[[65,59,80,81,56,55,40]],l.datesData.options={scales:{yAxes:[{id:"y-axis-1",type:"linear",display:!0,position:"left"}]}},l.reasonsData.labels=["Sexismo","Racismo","Religioso","Homofobia"],l.reasonsData.series=["Series A"],l.reasonsData.data=[[65,59,80,81,56,55,40]]}var l=this;l.loadingReports=!1,l.report={},l.reporting=!1,l.reports=[],l.getReports=f,l.init=g,l.setReports=h,l.submitReport=i,l.toggleSidenav=j,l.setupCharts=k,l.mediaData={},l.datesData={},l.reasonsData={},l.init()}]),angular.module("mediosSuciosFrontApp").service("msApiService",["$http","Restangular",function(a,b){this.Report=b.all("report"),this.submitReport=function(a){return this.Report.post(a)},this.getReports=function(a){var b={sort:"createdAt DESC"};return angular.extend(b,a),this.Report.getList(b)},this.getSourceCount=function(){var c=b.configuration.baseUrl;return a.get(c+"/sourcecount")},this.getMotiveCount=function(){var c=b.configuration.baseUrl;return a.get(c+"/motivecount")},this.getDateReportCount=function(){var c=b.configuration.baseUrl;return a.get(c+"/datecount")}}]),angular.module("mediosSuciosFrontApp").service("metadataService",function(){this.getBasicInfo=function(a){var b={title:a.general.title,description:a.general.description};return a.openGraph&&(b.title=a.openGraph.title,b.description=a.openGraph.description,a.openGraph.image&&(b.image=a.openGraph.image.url)),b}}),angular.module("mediosSuciosFrontApp").service("prismicService",["$http",function(a){this.getAll=function(){var b={ref:"WTiKMSgAACYA3QJb",format:"json"};return a.get("https://medios-sucios.prismic.io/api/v1/documents/search",{params:b})},this.getByUID=function(b){var c={ref:"WTiKMSgAACYA3QJb",format:"json",q:'[[:d = at(my.pagina.uid, "'+b+'")]]'};return a.get("https://medios-sucios.prismic.io/api/v1/documents/search",{params:c})}}]),angular.module("mediosSuciosFrontApp").controller("ContentCtrl",["Prismic","$routeParams",function(a,b){function c(){a.all().then(f.setPages).then(e)}function d(a){return f.pages=a.results,f.generalContent=f.pages.find(function(a){return"contenido_general"===a.type}),f.pages=f.pages.filter(function(a){return"pagina"===a.type}),f.pages}function e(a){var c=b.contentSlug;f.content=a.find(function(a){return c===a.slug}),console.log(f.content)}var f=this;f.init=c,f.setPages=d,f.findPage=e,f.init()}]),angular.module("mediosSuciosFrontApp").controller("ContactoCtrl",["Prismic","$http",function(a,b){function c(){a.all().then(f.setPages)}function d(a){f.pages=a.results,f.generalContent=f.pages.find(function(a){return"contenido_general"===a.type}),f.pages=f.pages.filter(function(a){return"pagina"===a.type})}function e(){f.reporting=!0,f.done=!1;var a={method:"POST",url:"https://formspree.io/sonny@spaceshiplabs.com",headers:{"Content-Type":"application/json"},data:{name:f.contact.name,email:f.contact.email,message:f.contact.message}};console.log(a),b(a).then(function(a){console.log(a),f.reporting=!1,f.done=!0})}var f=this;f.init=c,f.setPages=d,f.submitContact=e,f.reporting=!1,f.done=!1,f.init()}]),angular.module("mediosSuciosFrontApp").controller("AvisoDePrivacidadCtrl",["Prismic",function(a){function b(){a.all().then(d.setPages)}function c(a){return d.pages=a.results,d.generalContent=d.pages.find(function(a){return"contenido_general"===a.type}),d.pages}var d=this;d.init=b,d.setPages=c,d.init()}]),angular.module("mediosSuciosFrontApp").run(["$templateCache",function(a){"use strict";a.put("views/aviso-de-privacidad.html",'<div flex layout="row" layout-wrap layout-fill> <ng-include src="&quot;views/mainbox.html&quot;" flex flex-xs="100" flex-sm="100" class="main-box"></ng-include> <ng-include src="&quot;views/sidenav.html&quot;" layout="row" class="sidenav-container"></ng-include> </div> <md-content layout-padding class="main-content"> <h1>Aviso de privacidad</h1> <prismic-html fragment="vm.generalContent.fragments[\'contenido_general.aviso_de_privacidad\']"></prismic-html> </md-content> <ng-include src="&quot;views/footer.html&quot;"></ng-include>'),
a.put("views/contacto.html",'<div flex layout="row" layout-wrap layout-fill> <ng-include src="&quot;views/mainbox.html&quot;" flex flex-xs="100" flex-sm="100" class="main-box"></ng-include> </div> <md-content layout-padding class="md-padding" layout="row" layout-align="space-around" layout-wrap> <form name="contactForm" ng-submit="vm.submitContact()" class="report-form md-padding" flex="30" flex-xs="100" flex-sm="100"> <br> <br> <md-input-container> <label>Nombre</label> <input ng-model="vm.contact.name" ng-disabled="vm.reporting" required name="name"> <div ng-messages="contactForm.name.$error" role="alert"> <div ng-message="required">Este campo es obligatorio.</div> </div> </md-input-container> <md-input-container> <label>Email</label> <input ng-model="vm.contact.email" ng-disabled="vm.reporting" required name="name" type="email"> <div ng-messages="contactForm.email.$error" role="alert"> <div ng-message="email">Por favor ingrese un email valido.</div> <div ng-message="required">Este campo es obligatorio.</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Mensaje</label> <textarea ng-model="vm.contact.message" ng-disabled="vm.reporting" rows="4" md-select-on-focus name="message"></textarea> <div ng-messages="contactForm.message.$error" role="alert"> </div> </md-input-container> <md-button type="submit" class="reportbtn" ng-if="!vm.reporting" layout="row" layout-align="center center">enviar</md-button> <md-progress-circular ng-if="vm.reporting" md-mode="indeterminate"></md-progress-circular> <p ng-if="vm.done">Gracias, su mensaje ha sido enviado. </p> <br> <br> <br> <h3>Para más información contactanos:</h3> <p>512.582.2223 | 01.800.851.7910</p> <p>info@mediossucios.com</p> <br> <br> <br> <br> <br> </form> <iframe flex="40" flex-xs="100" flex-sm="100" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3720.6647401440246!2d-86.82321088451178!3d21.165736385924305!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f4c2ea9f3f4faf9%3A0xa81de67d6865a598!2sCiudadan%40s+por+la+Transparencia!5e0!3m2!1sen!2smx!4v1497540695397" width="600" height="450" frameborder="0" style="border:0" allowfullscreen></iframe> </md-content> <ng-include src="&quot;views/footer.html&quot;"></ng-include>'),a.put("views/content.html",'<div flex layout="row" layout-wrap layout-fill> <ng-include src="&quot;views/mainbox.html&quot;" flex flex-xs="100" flex-sm="100" class="main-box"></ng-include> <ng-include src="&quot;views/sidenav.html&quot;" layout="row" class="sidenav-container" flex-xs="100" flex-sm="100"></ng-include> </div> <md-content layout-padding class="main-content"> <prismic-html fragment="vm.content.fragments[\'pagina.titulo\']"></prismic-html> <prismic-html fragment="vm.content.fragments[\'pagina.contenido\']"></prismic-html> </md-content> <ng-include src="&quot;views/footer.html&quot;"></ng-include>'),a.put("views/footer.html",'<div id="footer"> <div class="footer-inner"> <div layout="row"> <div flex="50"> <p> <a href="/medios-sucios-front/"><img class="logo-footer" src="images/Logo-Medios-Sucios2.7459ffec.png" alt="medios sucios"></a> </p> <ul class="sitemap"> <li ng-repeat="page in vm.pages"><a ng-href="#!/content/{{page.slug}}">{{page.fragments[\'pagina.titulo\'].value[0].text}}</a></li> </ul> </div> </div> <div layout="row" layout-align="space-between start" layout-wrap> <div flex="50" flex-sm="100" flex-xs="100"> <p> <a target="_blank" ng-href="{{vm.generalContent.fragments[&quot;contenido_general.instagram_link&quot;].value.url}}"><span class="icon icon-instagram"></span></a> <a target="_blank" ng-href="{{vm.generalContent.fragments[&quot;contenido_general.facebook_link&quot;].value.url}}"><span class="icon icon-facebook"></span></a> <a target="_blank" ng-href="{{vm.generalContent.fragments[&quot;contenido_general.twitter_link&quot;].value.url}}"><span class="icon icon-twitter"></span></a> </p> </div> <div flex-sm="100" flex-xs="100"> <p class="final-links"> <!-- <a href="#!/aviso-de-privacidad">Aviso de privacidad</a> --> <a href="#!/contacto">Contacto</a> </p> <p class="copyright"> <span>&copy; 2017 medios sucios</span> | Todos los derechos reservados </p> </div> </div> </div> </div>'),a.put("views/gridlist.html",'<md-grid-list md-cols="1" md-cols-sm="2" md-cols-md="3" md-cols-gt-md="12" md-row-height-gt-md="1:1" md-row-height="4:3" md-gutter="8px" md-gutter-gt-sm="4px"> <md-grid-tile ng-repeat="report in vm.reports" md-rowspan="3" md-colspan="3" md-colspan-sm="1" md-colspan-xs="1" class="grid-tile"> <div class="md-padding"> <h3>{{report.motive}}</h3> <h4><a ng-href="{{report.link}}">{{ report.info.title }}</a></h4> <p> {{report.info.description}} </p> </div> <md-grid-tile-footer> {{report.source.domain}} </md-grid-tile-footer> </md-grid-tile> </md-grid-list>'),a.put("views/main.html",'<div flex layout="row" layout-wrap layout-fill> <ng-include src="&quot;views/mainbox.html&quot;" flex flex-xs="100" flex-sm="100" class="main-box"></ng-include> <ng-include src="&quot;views/sidenav.html&quot;" layout="row" class="sidenav-container" flex-xs="100" flex-sm="100"></ng-include> </div> <div class="charts-section"> <h1>Reportes</h1> <div layout="row" layout-wrap layout-align="space-between center" class="charts-section-inner"> <div flex="33" flex-xs="100" class="chart-item"> <canvas id="bar" class="chart chart-bar" chart-data="vm.sourceData.data" chart-options="vm.sourceData.options" chart-labels="vm.sourceData.labels"> </canvas> <h2>Medios</h2> </div> <div flex="33" flex-xs="100" class="chart-item"> <canvas id="line" class="chart chart-line" chart-data="vm.dateData.data" chart-labels="vm.dateData.labels"> </canvas> <h2>Fecha</h2> </div> <div flex="33" flex-xs="100" class="chart-item"> <canvas id="bar" class="chart chart-bar" chart-data="vm.motiveData.data" chart-labels="vm.motiveData.labels" chart-series="vm.motiveData.series"> </canvas> <h2>Motivo</h2> </div> </div> </div> <div class="title-banner"> <h2>Los marranitos...</h2> </div> <div flex layout="row" layout-fill> <md-content flex class="md-padding" ng-include="&quot;views/simplelist.html&quot;"></md-content> </div> <ng-include src="&quot;views/footer.html&quot;"></ng-include>'),a.put("views/mainbox.html",'<md-toolbar layout="row" class="md-toolbar-tools main-toolbar"> <h1 flex layout="row">Contacto: <prismic-html fragment="vm.generalContent.fragments[\'contenido_general.contacto_header_clave_pais\']"></prismic-html> <span><prismic-html fragment="vm.generalContent.fragments[\'contenido_general.telefono_header\']"></prismic-html></span> </h1> <a target="_blank" ng-href="{{vm.generalContent.fragments[&quot;contenido_general.instagram_link&quot;].value.url}}"><span class="icon icon-instagram"></span></a> <a target="_blank" ng-href="{{vm.generalContent.fragments[&quot;contenido_general.facebook_link&quot;].value.url}}"><span class="icon icon-facebook"></span></a> <a target="_blank" ng-href="{{vm.generalContent.fragments[&quot;contenido_general.twitter_link&quot;].value.url}}"><span class="icon icon-twitter"></span></a> <!--<md-button class=\'md-secondary md-raised\' ng-click=\'vm.toggleSidenav()\' >Reportar</md-button> --> </md-toolbar> <md-content layout="row" layout-wrap class="marquee" layout-fill> <div class="marquee-inner"> <div layout-align="space-between start" layout="row" class="menu-container"> <a ng-repeat="page in vm.pages" ng-href="#!/content/{{page.slug}}">{{page.fragments[\'pagina.titulo\'].value[0].text}}</a> </div> <div class="intro-content"> <h1><strong>Medios sucios</strong> es un sitio que recopila el discurso de odio en medios de latinoamérica</h1> <!--  <h2>Haz un reporte</h2>\n      <p>\n        <button class="action-btn">\n          Conoce más\n        </button>\n      </p> --> </div> </div> </md-content>'),a.put("views/sidenav.html",'<md-sidenav md-component-id="left" class="md-sidenav-left" md-is-locked-open="true" flex layout-fill> <div class="head"> <a href="/medios-sucios-front/"><img src="images/logo1.5eae2d9f.png" alt="medios sucios"></a> </div> <form name="reportForm" ng-submit="vm.submitReport()" class="report-form"> <div class="md-padding"> <h1>¿Cómo participar?</h1> <h2>Simplemente llena el formulario</h2> <div> <md-input-container> <label>URL de el Artículo</label> <input ng-model="vm.report.url" ng-disabled="vm.reporting" required type="url" name="reportUrl"> <div ng-messages="reportForm.reportUrl.$error" role="alert"> <div ng-message="url">Debe ser un URL valido.</div> <div ng-message="required">Este campo es obligatorio.</div> </div> </md-input-container> </div> <div> <md-input-container> <label>Tipo de discriminación</label> <md-select aria-label="motivo" ng-model="vm.report.motive" ng-disabled="vm.reporting" name="reportMotive" class="select-type" required> <md-option ng-repeat="motive in vm.motives" value="{{motive.title}}"> {{motive.title}} </md-option> </md-select> <div ng-messages="reportForm.reportMotive.$error" role="alert"> <div ng-message="required">Este campo es obligatorio.</div> </div> </md-input-container> </div> <md-input-container class="md-block"> <label>Comentario</label> <textarea maxlength="256" ng-model="vm.report.coment" ng-disabled="vm.reporting" md-maxlength="256" rows="4" md-select-on-focus name="reportComment"></textarea> <div ng-messages="reportForm.reportComment.$error" role="alert"> <div ng-message="md-maxlength">Máximo 256 caracteres</div> </div> </md-input-container> </div> <md-button type="submit" class="reportbtn" ng-if="!vm.reporting" layout="row" layout-align="center center"> <span>Reportar</span> <span class="btn-icon"></span> <!--<span class="btn-icon"></span>--> </md-button> <md-progress-circular ng-if="vm.reporting" md-mode="indeterminate"></md-progress-circular> </form> </md-sidenav>'),a.put("views/simplelist.html",'<div layout-align="center center" layout="row" flex layout-fill ng-if="vm.loadingReports"> <md-progress-circular md-mode="indeterminate"></md-progress-circular> </div> <md-list flex class="reports-list"> <md-list-item class="md-3-line md-long-text report" ng-repeat="report in vm.reports" layout="row" layout-wrap> <div class="img-container" flex-gt-sm="20" flex-md="30" flex="100" style="background-image: url(\'{{report.info.image}}\')"> <div class="overlay"></div> <div class="md-padding" style="position:relative"> <h2>{{report.source.domain}}</h2> <h3>{{report.motive}}</h3> <h3 ng-bind="report.createdAt | date:\'dd-MM-yyyy\'"></h3> </div> </div> <div flex-gt-sm="80" flex-md="70" flex="100" class="md-list-item-text md-padding"> <h3><a ng-href="{{report.link}}">{{ report.info.title }}</a></h3> <h4><a ng-href="{{report.link}}" target="_blank">{{report.link}}</a></h4> <p> {{report.info.description}} </p> </div> </md-list-item> <!-- \n  <div>\n    <button class="action-btn action-btn-block action-btn-inverted">\n      Cargar más\n    </button>\n  </div> --> </md-list>')}]);